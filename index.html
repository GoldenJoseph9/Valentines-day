<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>For You - Valentine's Day</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 700px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(255, 107, 107, 0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            padding: 40px 30px;
            text-align: center;
            color: white;
        }
        
        h1 {
            font-family: 'Georgia', serif;
            font-size: 3.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .message {
            font-size: 1.15rem;
            margin-bottom: 20px;
            text-align: center;
            color: #555;
            line-height: 1.8;
        }
        
        .heart {
            text-align: center;
            font-size: 3rem;
            margin: 20px 0;
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .music-player {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #e6eeff;
            text-align: center;
        }
        
        .play-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
            transition: all 0.3s ease;
        }
        
        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .play-btn.playing {
            background: linear-gradient(135deg, #4a69bd 0%, #6a89cc 100%);
        }
        
        .debug-info {
            background: #fff3cd;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.9rem;
            color: #856404;
            text-align: left;
            display: none;
        }
        
        .debug-info.show {
            display: block;
        }
        
        .debug-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .status {
            margin: 15px 0;
            padding: 10px;
            border-radius: 10px;
            font-weight: 500;
        }
        
        .status.ready {
            background: #d4edda;
            color: #155724;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .footer {
            text-align: center;
            padding: 25px;
            color: #888;
            border-top: 1px solid #eee;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>For You</h1>
            <div style="opacity: 0.9;">A Valentine's Day Message</div>
        </div>
        
        <div class="content">
            <p class="message">
                I wanted to send you this note to say thank you for the time we shared. 
                You're an amazing person, and I wish you nothing but happiness.
            </p>
            
            <div class="heart">üíù</div>
            
            <p class="message">
                Sometimes timing doesn't align, and that's okay. 
                What matters is the respect and care we showed each other.
            </p>
            
            <div class="music-player">
                <h3 style="color: #333; margin-bottom: 20px;">A Song for You</h3>
                
                <button class="play-btn" id="playBtn">
                    <span id="playIcon">‚ñ∂</span>
                    <span id="playText">Play Helpless by Tatiana Manaois</span>
                </button>
                
                <div class="status ready" id="status">
                    Click play to start the song
                </div>
                
                <button class="debug-btn" id="debugBtn">üîß Show Debug Info</button>
                
                <div class="debug-info" id="debugInfo">
                    <strong>Debug Information:</strong><br>
                    ‚Ä¢ Audio Source: <span id="audioSourceInfo">Loading...</span><br>
                    ‚Ä¢ Audio State: <span id="audioState">Loading...</span><br>
                    ‚Ä¢ File Size: <span id="fileSize">Checking...</span><br>
                    ‚Ä¢ Browser Support: <span id="browserSupport">Checking...</span><br>
                    <br>
                    <strong>If music doesn't play:</strong><br>
                    1. Make sure "helpless.mp3" is in your GitHub repo<br>
                    2. File must be less than 25MB<br>
                    3. Try Chrome or Firefox browser<br>
                    4. Click play multiple times
                </div>
            </div>
            
            <div class="footer">
                <p>With respect and best wishes,</p>
                <p style="color: #ff6b6b; font-size: 1.2rem; margin-top: 10px;">Happy Valentine's Day üíò</p>
                <p style="font-size: 0.8rem; margin-top: 15px; color: #aaa;">
                    Page hosted on GitHub Pages ‚Ä¢ Your repository: GoldenJoseph9/Valentines-day
                </p>
            </div>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="audioPlayer" preload="metadata">
        <!-- FIXED: Using direct GitHub raw URL -->
        <source src="https://raw.githubusercontent.com/GoldenJoseph9/Valentines-day/main/helpless.mp3" type="audio/mpeg">
    </audio>

    <script>
        // DOM Elements
        const audio = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const playText = document.getElementById('playText');
        const statusEl = document.getElementById('status');
        const debugBtn = document.getElementById('debugBtn');
        const debugInfo = document.getElementById('debugInfo');
        const audioSourceInfo = document.getElementById('audioSourceInfo');
        const audioState = document.getElementById('audioState');
        const fileSize = document.getElementById('fileSize');
        const browserSupport = document.getElementById('browserSupport');
        
        let isPlaying = false;
        
        // Debug function to check audio file
        async function checkAudioFile() {
            const audioUrl = 'https://raw.githubusercontent.com/GoldenJoseph9/Valentines-day/main/helpless.mp3';
            audioSourceInfo.textContent = audioUrl;
            
            try {
                // Check if file exists and get size
                const response = await fetch(audioUrl, { method: 'HEAD' });
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    fileSize.textContent = size ? `${(size / 1024 / 1024).toFixed(2)} MB` : 'Unknown size';
                    statusEl.textContent = '‚úì Music file found on GitHub';
                    statusEl.className = 'status ready';
                } else {
                    fileSize.textContent = 'File not found or inaccessible';
                    statusEl.textContent = '‚ùå Music file not found on GitHub';
                    statusEl.className = 'status error';
                }
            } catch (error) {
                fileSize.textContent = 'Error checking file';
                statusEl.textContent = '‚ùå Error accessing GitHub file';
                statusEl.className = 'status error';
            }
            
            // Check browser support
            browserSupport.textContent = audio.canPlayType('audio/mpeg') ? 'MP3 supported ‚úì' : 'MP3 not supported';
            
            // Update audio state
            updateAudioState();
        }
        
        // Update audio state display
        function updateAudioState() {
            const states = [
                'HAVE_NOTHING (0)',
                'HAVE_METADATA (1)',
                'HAVE_CURRENT_DATA (2)',
                'HAVE_FUTURE_DATA (3)',
                'HAVE_ENOUGH_DATA (4)'
            ];
            audioState.textContent = states[audio.readyState] || `Unknown (${audio.readyState})`;
        }
        
        // Play/Pause toggle
        function togglePlay() {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
                playIcon.textContent = '‚ñ∂';
                playText.textContent = 'Play Helpless by Tatiana Manaois';
                playBtn.classList.remove('playing');
                statusEl.textContent = 'Paused - Click to resume';
                statusEl.className = 'status ready';
            } else {
                audio.play()
                    .then(() => {
                        isPlaying = true;
                        playIcon.textContent = '‚è∏';
                        playText.textContent = 'Pause';
                        playBtn.classList.add('playing');
                        statusEl.textContent = 'Playing now!';
                        statusEl.className = 'status ready';
                        updateAudioState();
                    })
                    .catch(error => {
                        console.error('Playback error:', error);
                        statusEl.innerHTML = '‚ùå Playback failed. Try:<br>1. Clicking play again<br>2. Using Chrome/Firefox<br>3. Checking file on GitHub';
                        statusEl.className = 'status error';
                        
                        // Auto-retry after 1 second
                        setTimeout(() => {
                            audio.load();
                        }, 1000);
                    });
            }
        }
        
        // Initialize
        function init() {
            // Set up event listeners
            playBtn.addEventListener('click', togglePlay);
            debugBtn.addEventListener('click', () => {
                debugInfo.classList.toggle('show');
                debugBtn.textContent = debugInfo.classList.contains('show') ? 'üîß Hide Debug Info' : 'üîß Show Debug Info';
            });
            
            // Audio event listeners
            audio.addEventListener('loadedmetadata', () => {
                updateAudioState();
                statusEl.textContent = '‚úì Ready to play - Click the button above';
                statusEl.className = 'status ready';
            });
            
            audio.addEventListener('canplay', () => {
                updateAudioState();
                statusEl.textContent = '‚úì Music loaded and ready!';
                statusEl.className = 'status ready';
            });
            
            audio.addEventListener('error', (e) => {
                console.error('Audio error:', audio.error);
                updateAudioState();
                
                let errorMsg = 'Unknown audio error';
                switch(audio.error.code) {
                    case 1: errorMsg = 'Audio loading aborted'; break;
                    case 2: errorMsg = 'Network error - Check GitHub connection'; break;
                    case 3: errorMsg = 'Audio decoding error - Invalid MP3 file'; break;
                    case 4: errorMsg = 'Audio not supported - Try different format'; break;
                }
                
                statusEl.innerHTML = `‚ùå ${errorMsg}`;
                statusEl.className = 'status error';
            });
            
            audio.addEventListener('ended', () => {
                isPlaying = false;
                playIcon.textContent = '‚ñ∂';
                playText.textContent = 'Play Again';
                playBtn.classList.remove('playing');
                statusEl.textContent = 'Song ended - Click to play again';
                statusEl.className = 'status ready';
            });
            
            // Check the audio file on GitHub
            checkAudioFile();
            
            // Try to preload the audio
            audio.load();
            
            // Check after 5 seconds if still loading
            setTimeout(() => {
                if (audio.readyState === 0) {
                    statusEl.innerHTML = '‚ö†Ô∏è Still loading... Try:<br>1. Clicking play button<br>2. Refreshing page<br>3. Checking GitHub file';
                    statusEl.className = 'status error';
                }
            }, 5000);
        }
        
        // Start when page loads
        document.addEventListener('DOMContentLoaded', init);
        
        // Also try to play on any user click (helps with autoplay restrictions)
        document.addEventListener('click', function firstClick() {
            if (audio.readyState >= 1) {
                audio.load();
            }
        }, { once: true });
    </script>
</body>
</html>
